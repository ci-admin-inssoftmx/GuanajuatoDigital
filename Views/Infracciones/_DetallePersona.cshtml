@model PersonaModel

@{
    var x = Convert.ToBoolean(ViewBag.EsSoloLectura);
    var Lectura = x ;
}

<!-- **************************************** -->

<div class="row">
    <div class="col-auto btnOutline btnOutlinePrimary my-2 mx-auto mx-xl-2 p-0">
        <button type="button" href="#" id="btnNuevoConductor" @(Lectura ? "disabled" : "") onclick="btnEditarPersona2()">
            <h6 class="m-0 d-flex align-items-center"><i class="icon-edit h5 mb-0 me-2"></i><b>Editar</b></h6>
        </button>
    </div>
</div>

<div class="row my-4 px-4 align-items-end">
    <div class="form-group col-12 col-md-6 col-lg-4 col-xl-3 col-xx-2">
        <div class="controlForm my-3">
            <label>Nombre:</label>&nbsp;@(Model.nombreCompleto != null ? Model.nombreCompleto : "-")

        </div>
    </div>
    <div class="form-group col-md-3">
        <div class="controlForm">
            <label>Folio Detenido:</label>
            <p>@(!string.IsNullOrEmpty(Model.folioDetencion) ? Model.folioDetencion : "-")</p>
        </div>
    </div>
    <div class="form-group col-12 col-md-6 col-lg-4 col-xl-3 col-xx-2">
        <div class="controlForm">
            <label>Tipo de persona:</label>&nbsp;@(Model.tipoPersona != null ? Model.tipoPersona : "-")
        </div>
    </div>
    <div class="form-group col-12 col-md-6 col-lg-4 col-xl-3 col-xx-2">
        <div class="controlForm my-3">
            <label>CURP:</label>
            <p>@(Model.CURP != null ? Model.CURP : "-")</p>
        </div>
    </div>
    <div class="form-group col-12 col-md-6 col-lg-4 col-xl-3 col-xx-2">
        <div class="controlForm my-3">
            <label>RFC:</label>
            <p>@(Model.RFC != null ? Model.RFC : "-")</p>
        </div>
    </div>
    <div class="form-group col-12 col-md-6 col-lg-4 col-xl-3 col-xx-2">
        <div class="controlForm my-3">
            <label>SEXO:</label>&nbsp;@(Model.genero != null ? Model.genero : "-")
        </div>
    </div>
    <div class="form-group col-12 col-md-6 col-lg-4 col-xl-3 col-xx-2">
        <div class="controlForm my-3">
            <label>Fecha nacimiento:</label>
            @if (Model.fechaNacimiento.HasValue)
            {
                <p>@(Model.fechaNacimiento > DateTime.MinValue ? Model.fechaNacimiento.Value.ToString("dd/MM/yyyy"):"-")</p>
            }
            else
            {
                <p>-</p>
            }

        </div>
    </div>
    <div class="form-group col-12 col-md-6 col-lg-4 col-xl-3 col-xx-2">
        <div class="controlForm my-3">
            <label>Municipio:</label>
            <p>@(Model.PersonaDireccion !=null &&   Model.PersonaDireccion.municipio != null ? Model.PersonaDireccion.municipio : "-")</p>
        </div>
    </div>
    <div class="form-group col-12 col-md-6 col-lg-4 col-xl-3 col-xx-2">
        <div class="controlForm  my-3">
            <label>Entidad:</label>
            <p>@(Model.PersonaDireccion != null && Model.PersonaDireccion.entidad != null ? Model.PersonaDireccion.entidad : "-")</p>
        </div>
    </div>
    <div class="form-group col-12 col-md-6 col-lg-4 col-xl-3 col-xx-2">
        <div class="controlForm my-3">
            <label>Calle:</label>
            <p>@(Model.PersonaDireccion != null && Model.PersonaDireccion.calle != null ? Model.PersonaDireccion.calle : "-")</p>
        </div>
    </div>
    <div class="form-group col-12 col-md-6 col-lg-4 col-xl-3 col-xx-2">
        <div class="controlForm my-3">
            <label>Número:</label>
            <p>@(Model.PersonaDireccion != null && Model.PersonaDireccion.numero != null ? Model.PersonaDireccion.numero : "-")</p>
        </div>
    </div>
    <div class="form-group col-12 col-md-6 col-lg-4 col-xl-3 col-xx-2">
        <div class="controlForm my-3">
            <label>Colonia:</label>
            <p>@(Model.PersonaDireccion != null && Model.PersonaDireccion.colonia != null ? Model.PersonaDireccion.colonia : "-")</p>
        </div>
    </div>
    <div class="form-group col-12 col-md-6 col-lg-4 col-xl-3 col-xx-2">
        <div class="controlForm my-3">
            <label>Teléfono:</label>
            <p>@(Model.PersonaDireccion !=null && Model.PersonaDireccion.telefono != null ? Model.PersonaDireccion.telefono : "-")</p>
        </div>
    </div>
    <div class="form-group col-12 col-md-6 col-lg-4 col-xl-3 col-xx-2">
        <div class="controlForm my-3">
            <label>Correo:</label>
            <p>@(Model.PersonaDireccion != null && Model.PersonaDireccion.correo != null ? Model.PersonaDireccion.correo : "-")</p>
        </div>
    </div>
    <div class="form-group col-12 col-md-6 col-lg-4 col-xl-3 col-xx-2">
        <div class="controlForm my-3">
            <label>Tipo licencia:</label>
             <p>@(Model.tipoLicencia != null ? Model.tipoLicencia : "-")</p>

        </div>
    </div>
    <div class="form-group col-12 col-md-6 col-lg-4 col-xl-3 col-xx-2">
        <div class="controlForm my-3">
            <label>Licencia:</label>
            <p>@(Model.numeroLicencia != null ? Model.numeroLicencia : "-")</p>
        </div>
    </div>
    <div class="form-group col-12 col-md-6 col-lg-4 col-xl-3 col-xx-2">
        <div class="controlForm my-3">
            <label>Vigencia licencia:</label>
            <p>
                @((Model.vigenciaLicencia.HasValue && Model.vigenciaLicencia.Value != new DateTime(1900, 1, 1) && Model.vigenciaLicencia.Value != DateTime.MinValue)
                    ? Model.vigenciaLicencia.Value.ToString("dd/MM/yyyy")
                    : "-")


            </p>

        </div>
    </div>
</div>


<div class="modal fade modalCustom" id="modalCrearPersona2" aria-labelledby="modalCrearPersona" aria-hidden="true">
    <div class="modal-dialog modal-xl boxShadow modal-dialog-centered ">
        <div class="modal-content">

            <div class="modal-body" id="modalBodyCrearPersona2">
            </div>
        </div>
    </div>
</div>


<script>
    function btnEditarPersona2(){

        console.log("editar persona 2 _DetallePersona")
        var esConductor = 1
        var can =0

        if (window.eseditar){
            can=1
        }

        var id = $("#idPersona").val()
        window.DoUpdate=null
        window.DoUpdate = function (d){
            $("#idPersona").val(d)
            buscarPersona(d);
        }
        console.log("editar persona 2 _DetallePersona")
            showLoading();
            $.ajax({
                url: '@Url.Action("ajax_ModalEditarPersona")',
                type: 'GET',
            data: { id: id, esConductor: esConductor, UpdatePermanencia: can, Ope:window.idInfraccion },
                contentType: "application/json; charset=utf-8",
                dataType: "html",
                success: function (value) {

               
                if ($('#modalCrearPersona3')){
                    $('#modalBodyCrearPersona3').html("");
                    $('#modalCrearPersona3').modal('hide');
                }
                

                    $('#modalBodyCrearPersona2').html(value);
                    $('#modalCrearPersona2').modal({ backdrop: 'static', keyboard: false });
                    $('#modalCrearPersona2').modal('show');


                    hideLoading();
                }, error: function () {
                console.log("editar persona 2 _DetallePersona ERROR")
                    sitteg_warning("Ocurrio un error al procesar su solicitud.");
                    hideLoading();
                }
            });
            event.stopPropagation();
        
    }
</script>


