
<script>
    function filtroCarretera() {
        var idDelegacion = $("#idDelegacionFiltroCar").val();
        var idDependencia = $("#idDependenciaFiltro").val();

        idDependencia = idDependencia ? idDependencia : null;

        return {
            idDelegacion: idDelegacion,
            idDependencia: idDependencia
        };
    }

</script>
<div class="row">
    <div class="col-6 mb-4 px-4 rounded gridCustom">

        @(
            Html.Kendo().Grid<GuanajuatoAdminUsuarios.Models.ReportesModel>()
            .Name("gridReprorteInf/AccMunicipio")
            .Columns(columns =>
            {
                columns.Bound(c => c.nombreOficina).Title("Oficina/Delegación");
                columns.Bound(c => c.cantidadAccidentes).Title("Accidentes").ClientFooterTemplate("Total Accidentes : #=sum#");
                columns.Bound(c => c.cantidadInfracciones).Title("Infracciones").ClientFooterTemplate("Total Infracciones : #=sum#");


            }).HtmlAttributes(new { style = "height:550px" })
            .Sortable()
            //.Groupable()
            .Scrollable()
            .Pageable()
            .DataSource(dataSource => dataSource
            .Ajax()
            .Read(read => read.Action("GetInfraccionesAccidentesMunicipio", "Reportes").Data("filtroCarretera"))
            .PageSize(10).Model(model => model.Id(p => p.tipoLicencia))
            .Aggregates(aggregates =>
            {
                aggregates.Add(c => c.cantidadAccidentes).Sum();
                aggregates.Add(c => c.cantidadInfracciones).Sum();

            })
            )

            .ToolBar(tools =>
            {
                tools.Excel();
                tools.Search().Text("Buscar...");
            })

            .Excel(excel => excel
            .FileName("Reporte_Infracciones/Accidentes_Municipio.xlsx")
            .Filterable(true)
            .AllPages(true)
            .ProxyURL(Url.Action("Excel_Export_Save", "Grid"))

            )

            .Selectable(selectable => selectable.Mode(GridSelectionMode.Single)
            .Type(GridSelectionType.Row)
            )
            .Events(events => events.DataBound("replaceLegend").DataBinding("replaceLegend"))

            )
    </div>
</div>

