<script>
    function filtroLicencia() {
        var txtLicencia = $("#TxtLicencia").val();

        txtLicencia = txtLicencia ? txtLicencia : null;

        return {
            txtLicencia: txtLicencia
        };
    }

</script>
<div class="row">
    <div class="col-6 mb-4 px-4 rounded gridCustom">

        @(
                Html.Kendo().Grid<GuanajuatoAdminUsuarios.Models.ReportesModel>()
                .Name("gridMunicipiosColoniasMasAccidentes")
                .Columns(columns =>
                {
                    columns.Bound(c => c.municipo).Title("Municipio");
                    columns.Bound(c => c.colonia).Title("Colonia");
                    columns.Bound(c => c.cantidadAccidentes).Title("Accidentes").ClientFooterTemplate("Total Accidentes : #=sum#");


                }).HtmlAttributes(new { style = "height:550px" })
                .Sortable()
                //.Groupable()
                .Scrollable()
                .Pageable()
                .DataSource(dataSource => dataSource
                .Ajax()
                .Read(read => read.Action("GetMunicipiosColoniasConMasAccidentes", "Reportes").Data("filtroLicencia"))
                .PageSize(10)
                .Aggregates(aggregates =>
                {
                aggregates.Add(c => c.cantidadAccidentes).Sum();

                })
                )
                .ToolBar(tools =>
                {
                    tools.Excel();
                    tools.Search().Text("Buscar...");
                })

                .Excel(excel => excel
                .FileName("Reporte_Municipios/Colonia_Mas_Accidentes.xlsx")
                .Filterable(true)
                .AllPages(true)
                .ProxyURL(Url.Action("Excel_Export_Save", "Grid"))

                )

                .Selectable(selectable => selectable.Mode(GridSelectionMode.Single)
                .Type(GridSelectionType.Row)
                )
                .Events(events => events.DataBound("replaceLegend").DataBinding("replaceLegend"))

                )
    </div>
</div>