<div class="row">
    <div class="col-12 mb-4 px-4 rounded gridCustom">
        @(
            Html.Kendo().Grid<GuanajuatoAdminUsuarios.Models.Blocs.BlocsAltaModel>()
                .Name("gridBlocs")
                .Columns(columns =>
                {
                    columns.Bound(c => c.Boleta).Title("No. de boleta").Width(100);
                    columns.Bound(c => c.Serie).Title("No. de Serie").Width(80);
                    columns.Bound(c => c.CanDelete)
                        .Title(" ")
                        .ClientTemplate( 
                            "# if (CanDelete) { #" +
                            "<a class='k-button k-button-icontext k-grid-Eliminar custom-delete-button' href='\\#' onclick='showEliminarBlocModal(\"#=Boleta#\",\"#=Serie#\")'><span class='icon-delete'></span>Eliminar</a>" +
                            "# } else { #" +
                            "<a class='k-button k-button-icontext k-grid-Eliminar' href='\\#' style='color: gray; pointer-events: none;'><span class='icon-delete'></span>Eliminar</a>" +
                            "# } #")
                    .Width(100);
                })
                .HtmlAttributes(new { style = "height:550px" })
                .Sortable()
                .Scrollable()
                .Pageable()
                .DataSource(dataSource => dataSource
                    .Ajax()
                    .Read(read => read.Action("getLisGridAlta", "Blocs"))
                    .PageSize(5)
                )
                .ToolBar(t => t.Search().Text("Buscar..."))
                .Search(s =>
                {
                    s.Field(c => c.Serie);
                })           
            )
    </div>
</div>
<div class="modal fade modalCustom" id="eliminarBlocModal" aria-labelledby="eliminarBlocModal" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-body" id="eliminarBlocModalBody">
            </div>
        </div>
    </div>
</div>
<style>
    .custom-delete-button {
        color: red !important;
    }
</style>
<script>
    function showEliminarBlocModal(blocId, blocSerie) {
        showLoading();
        
        $.ajax({
            url: '@Url.Action("ModalEliminarBloc", "Blocs")',
            type: 'POST',
            data: {
                blocId: blocId,
                blocSerie: blocSerie
            },
            success: (data) => {
                $('#eliminarBlocModalBody').html(data);
                $('#eliminarBlocModal').modal('show');
                hideLoading();
            }, error: function () {
                sitteg_warning("Ocurrio un error al procesar su solicitud.");
                hideLoading();
            }
        });
    }
</script>